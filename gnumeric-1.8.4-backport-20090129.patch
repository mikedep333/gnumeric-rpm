From 8287b580c6e9d99cb095e4084d485f513180dca8 Mon Sep 17 00:00:00 2001
From: J.H.M. Dassen (Ray) <jdassen@src.gnome.org>
Date: Thu, 29 Jan 2009 14:33:02 +0000
Subject: Backport of fix for CVE-2009-0318 [#569648]

svn path=/branches/gnumeric-1-8/; revision=17111
---
diff --git a/NEWS b/NEWS
index cc2354f..a9ba585 100644
--- a/NEWS
+++ b/NEWS
@@ -1,3 +1,9 @@
+Gnumeric 1.8.5
+
+Jon KÃ¥re:
+        * Work around vulnerability in Python. CVE-2009-0318 [#569648]
+
+--------------------------------------------------------------------------
 Gnumeric 1.8.4
 
 Henry Law:
diff --git a/plugins/python-loader/ChangeLog b/plugins/python-loader/ChangeLog
index 8609fee..5978766 100644
--- a/plugins/python-loader/ChangeLog
+++ b/plugins/python-loader/ChangeLog
@@ -1,3 +1,9 @@
+2009-01-29  Jon K Hellan  <hellan@acm.org>
+
+	* gnm-py-interpreter.c (gnm_py_interpreter_new): Work around
+	security vulnerability in Python by making argv start with
+	"/dev/null". #569648.
+
 2009-01-18  Jody Goldberg <jody@gnome.org>
 
 	* Release 1.8.4
diff --git a/plugins/python-loader/gnm-py-interpreter.c b/plugins/python-loader/gnm-py-interpreter.c
index 4664f2e..a33f38a 100644
--- a/plugins/python-loader/gnm-py-interpreter.c
+++ b/plugins/python-loader/gnm-py-interpreter.c
@@ -79,7 +79,7 @@ gnm_py_interpreter_class_init (GObjectClass *gobject_class)
 		G_TYPE_NONE, 0);
 }
 
-static char *plugin_argv[] = {(char *) "gnumeric", NULL};
+static char *plugin_argv[] = {(char *) "/dev/null/python/is/buggy/gnumeric", NULL};
 
 GnmPyInterpreter *
 gnm_py_interpreter_new (GOPlugin *plugin)
--
cgit v0.8.2
